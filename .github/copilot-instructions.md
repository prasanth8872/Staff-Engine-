# AI Coding Assistant Instructions

## Architecture Overview
This is a full-stack task management application with:
- **Backend**: Node.js/Express server with PostgreSQL (Drizzle ORM), JWT authentication via cookies, Socket.IO for real-time updates
- **Frontend**: React (Vite) with TypeScript, Wouter routing, TanStack Query for API calls, shadcn/ui components
- **Shared**: Zod schemas in `shared/schema.ts` for type-safe API contracts
- **Data Flow**: REST API for CRUD, WebSocket events for live task updates (e.g., `task:created`, `task:updated`)

Key files: [server/index.ts](server/index.ts) (entry), [shared/schema.ts](shared/schema.ts) (models), [client/src/App.tsx](client/src/App.tsx) (routing)

## Developer Workflows
- **Development**: `npm run dev` starts Express server with Vite dev server (serves both API and client on port 5000); requires `DATABASE_URL` env var (use .env file)
- **Build**: `npm run build` bundles client (Vite) and server (esbuild) to `dist/`
- **Production**: `npm start` runs bundled server
- **Database**: `npm run db:push` applies schema changes via Drizzle Kit (requires `DATABASE_URL` env var)
- **Type Check**: `npm run check` runs TypeScript compiler

## Windows-Specific Setup Notes
- Install `cross-env` for environment variables: `npm install --save-dev cross-env`
- Rename `postcss.config.js` to `postcss.config.cjs` to avoid ES module issues
- Use `host: "127.0.0.1"` in server listen options (remove `reusePort`)

## Project Conventions
- **Authentication**: JWT stored in cookies (`taskflow_token`), auth middleware in [server/routes.ts](server/routes.ts)
- **API Requests**: Always include `credentials: "include"` in fetch calls for cookie auth (see [client/src/lib/queryClient.ts](client/src/lib/queryClient.ts))
- **Real-time**: Connect Socket.IO on login ([client/src/lib/socket.ts](client/src/lib/socket.ts)), listen for task events
- **Validation**: Use Zod schemas from `@shared/schema` for all API inputs/outputs
- **Styling**: Tailwind CSS with shadcn/ui components; priority/status badges use consistent color schemes (see [client/src/components/task-card.tsx](client/src/components/task-card.tsx))
- **Date Handling**: Use `date-fns` for formatting (e.g., due dates in task cards)

## Patterns & Examples
- **Task Relations**: Fetch tasks with creator/assignee via Drizzle relations ([shared/schema.ts](shared/schema.ts))
- **Component Props**: Pass full task objects with relations (e.g., `TaskWithRelations` type)
- **Error Handling**: Server uses `handleError` for Zod/validation errors; client throws on non-OK responses
- **State Management**: Auth context for user state, TanStack Query for server state, Socket for real-time sync

## Integration Points
- **Database**: PostgreSQL with Drizzle; migrations in `migrations/` (generated by `db:push`)
- **External APIs**: None currently; Socket.IO path is `/ws`
- **Environment**: `SESSION_SECRET` for JWT, `DATABASE_URL` for DB, `PORT` (default 5000); use `.env` file with `dotenv` for local dev</content>
<parameter name="filePath">c:\Desktop\Staff-Engineer\.github\copilot-instructions.md